<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>LICITAR • Painel</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

<style>
/* ======================================================
   RESET
====================================================== */
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:"Inter", sans-serif;
}

body{
  height:100vh;
  background:#f4f6f9;
  overflow:hidden;
}

/* ======================================================
   APP
====================================================== */
.app{
  display:flex;
  height:100vh;
  width:100vw;
}

/* ======================================================
   ZONA DE ATIVAÇÃO (DESKTOP)
====================================================== */
.nav-hover-zone{
  position:fixed;
  left:0;
  top:0;
  width:14px;
  height:100vh;
  z-index:50;
}

/* ======================================================
   SIDEBAR
====================================================== */
.sidebar{
  position:fixed;
  left:0;
  top:0;
  width:240px;
  height:100vh;
  background:#ffffff;
  border-right:1px solid #e2e6ef;
  display:flex;
  flex-direction:column;
  transform:translateX(-240px);
  transition:transform .25s ease;
  z-index:60;
}

/* DESKTOP HOVER */
.nav-hover-zone:hover + .sidebar,
.sidebar:hover{
  transform:translateX(0);
}

/* MOBILE DRAWER */
@media (max-width:768px){
  .nav-hover-zone{ display:none; }

  .sidebar{
    transform:translateX(-100%);
  }

  .sidebar.open{
    transform:translateX(0);
  }
}

/* ======================================================
   LOGO
====================================================== */
.logo-area{
  padding:20px 0;
  text-align:center;
  border-bottom:1px solid #edf0f6;
}
.logo-area img{
  width:120px;
}

/* ======================================================
   MENU
====================================================== */
.menu{
  padding:14px 8px;
  overflow-y:auto;
}

.menu-item{
  display:flex;
  align-items:center;
  gap:12px;
  padding:11px 16px;
  margin:6px;
  font-size:14px;
  color:#1d2d50;
  border-radius:10px;
  cursor:pointer;
  transition:.15s;
}

.menu-item img{
  width:20px;
}

.menu-item:hover{
  background:#eef3ff;
}

.menu-item.active{
  background:#dce6ff;
  font-weight:600;
  border-left:4px solid #1d57c9;
}

/* CORE */
.menu-core{
  background:#f0f4ff;
  font-weight:600;
  border-left:4px solid #1d57c9;
}

/* ======================================================
   SUBMENU
====================================================== */
.submenu{
  display:none;
  margin:4px 0 10px 46px;
}

.submenu a{
  display:block;
  padding:8px 12px;
  font-size:13px;
  border-radius:8px;
  color:#56627a;
  cursor:pointer;
}

.submenu a:hover{
  background:#eef3ff;
}

.submenu a.active-sub{
  background:#dce6ff;
  font-weight:600;
  color:#1d2d50;
}

@media (max-width:768px){
  .submenu a{
    padding:12px 14px;
    font-size:14px;
  }
}

/* ======================================================
   MAIN
====================================================== */
.main{
  flex:1;
  display:flex;
  flex-direction:column;
  height:100vh;
}

/* ======================================================
   HEADER
====================================================== */
.header{
  height:52px;
  background:linear-gradient(90deg,#0b1e39,#102b55);
  color:white;
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:0 24px;
  box-shadow:0 2px 6px rgba(0,0,0,.18);
}

.logo-title{
  font-size:18px;
  font-weight:800;
  letter-spacing:2px;
}

.user-area{
  display:flex;
  align-items:center;
  gap:18px;
  font-size:13px;
}

.logout{
  cursor:pointer;
  font-weight:600;
  color:#ffdede;
}
.logout:hover{ color:#ffffff; }

/* BOTÃO MOBILE */
.menu-mobile-btn{
  display:none;
  font-size:22px;
  cursor:pointer;
}

@media (max-width:768px){
  .menu-mobile-btn{
    display:block;
  }
}

/* ======================================================
   IFRAME
====================================================== */
iframe{
  border:none;
  width:100%;
  height:calc(100vh - 52px);
  background:#f4f6f9;
}

/* ======================================================
   SCROLL
====================================================== */
.menu::-webkit-scrollbar{
  width:6px;
}
.menu::-webkit-scrollbar-thumb{
  background:#cfd6e6;
  border-radius:10px;
}
</style>
</head>

<body>

<div class="app">

  <div class="nav-hover-zone"></div>

  <!-- SIDEBAR -->
  <div class="sidebar">

    <div class="logo-area">
      <img src="https://github.com/grupodvbr/licita/blob/main/ChatGPT%20Image%2027%20de%20jan.%20de%202026,%2019_27_44.png?raw=true">
    </div>

    <div class="menu">

      <div class="menu-item" onclick="openPage('home.html')" data-page="home.html">
        <img src="https://cdn-icons-png.flaticon.com/512/1946/1946488.png">
        Home
      </div>

      <div class="menu-item" onclick="toggleSub('sub_encontrar')">
        <img src="https://cdn-icons-png.flaticon.com/512/149/149852.png">
        Encontrar
      </div>

      <div class="submenu" id="sub_encontrar">
        <a onclick="openPage('buscar.html')" data-page="buscar.html">Buscar Oportunidades</a>
        <a onclick="openPage('avisos.html')" data-page="avisos.html">Meus Avisos</a>
        <a onclick="openPage('banco.html')" data-page="banco.html">Banco de Licitações</a>
      </div>

      <div class="menu-item" onclick="toggleSub('sub_cadastrar')">
        <img src="https://cdn-icons-png.flaticon.com/512/992/992651.png">
        Cadastrar
      </div>

      <div class="submenu" id="sub_cadastrar">
        <a onclick="openPage('documentos.html')" data-page="documentos.html">Documentos</a>
        <a onclick="openPage('cadastroempresas.html')" data-page="cadastroempresas.html">Empresas</a>
        <a class="menu-core" onclick="openPage('licitacoes.html')" data-page="licitacoes.html">Licitações</a>
        <a onclick="openPage('usuarios.html')" data-page="usuarios.html">Usuários</a>
      </div>

      <div class="menu-item" onclick="openPage('configuracoes.html')" data-page="configuracoes.html">
        <img src="https://cdn-icons-png.flaticon.com/512/3524/3524659.png">
        Configurações
      </div>

    </div>
  </div>

  <!-- MAIN -->
  <div class="main">

    <div class="header">
      <div style="display:flex;align-items:center;gap:12px;">
        <div class="menu-mobile-btn" onclick="toggleMobileMenu()">☰</div>
        <div class="logo-title">LICITAR</div>
      </div>

      <div class="user-area">
        <span id="userMail"></span>
        <span class="logout" onclick="logout()">Sair</span>
      </div>
    </div>

    <iframe id="frame" src="home.html"></iframe>

  </div>

</div>

<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script>
const supabaseClient = supabase.createClient(
  "https://mblvyircwsaxaslklzky.supabase.co",
  "sb_publishable_oN2CuBzXHaUF7NHYS_M7aw_tBqVeD-x"
);

async function validarSessao(){
  const email = localStorage.getItem("usuarioEmail");
  if(!email){
    location.href="login.html";
    return;
  }

  const { data, error } = await supabaseClient
    .from("usuarios")
    .select("id")
    .eq("email", email)
    .single();

  if(error || !data){
    localStorage.removeItem("usuarioEmail");
    alert("Sessão encerrada.");
    location.href="login.html";
    return;
  }

  document.getElementById("userMail").innerText = email;
}

validarSessao();
setInterval(validarSessao,15000);

function openPage(page){
  document.getElementById("frame").src = page;
  highlightMenu(page);

  if(window.innerWidth <= 768){
    document.querySelector(".sidebar").classList.remove("open");
  }
}

function highlightMenu(page){
  document.querySelectorAll(".menu-item").forEach(i=>i.classList.remove("active"));
  document.querySelectorAll(".submenu a").forEach(i=>i.classList.remove("active-sub"));

  const sub = document.querySelector(`a[data-page="${page}"]`);
  if(sub){
    sub.classList.add("active-sub");
    sub.closest(".submenu").previousElementSibling.classList.add("active");
    sub.closest(".submenu").style.display="block";
  }
}

function toggleSub(id){
  const el=document.getElementById(id);
  el.style.display = el.style.display==="block" ? "none" : "block";
}

function toggleMobileMenu(){
  document.querySelector(".sidebar").classList.toggle("open");
}

function logout(){
  localStorage.removeItem("usuarioEmail");
  location.href="login.html";
}
</script>

</body>
</html>
